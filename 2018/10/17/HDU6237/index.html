<!DOCTYPE html>
<html lang="zh-CN">

<!-- Head tag -->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <!--Description-->
  

  <!--Author-->
  

  <!--Open Graph Title-->
  
      <meta property="og:title" content="HDU6237"/>
  
  <!--Open Graph Description-->
  
  <!--Open Graph Site Name-->
  <meta property="og:site_name" content="Zcy"/>
  <!--Type page-->
  
      <meta property="og:type" content="article" />
  
  <!--Page Cover-->
  

    <meta name="baidu-site-verification" content="8vgn54BtUC" />

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <!-- 百度统计 -->
    <script>
	var _hmt = _hmt || [];
	(function() {
  	var hm = document.createElement("script");
  	hm.src = "https://hm.baidu.com/hm.js?c0451e16533956173997b85f7a8de666";
  	var s = document.getElementsByTagName("script")[0]; 
  	s.parentNode.insertBefore(hm, s);
	})();
    </script>
  <!-- Title -->
  
  <title>HDU6237 - Zcy</title>


  <link rel="shortcut icon" href="/favicon.ico">
    <!--font-awesome-->
  <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css">

    <link rel="stylesheet" href="/css/animate.css">
    <link rel="stylesheet" href="/css/thplayer.css">
  <!-- Custom CSS/Sass -->
  <link rel="stylesheet" href="/css/style.css">
    <script src="http://oct3pmpde.bkt.clouddn.com/jquery.js"></script>
</head>


<body>

  <!-- Nav -->
  <header class="site-header">
  <div class="header-inside">
    
    <div class="logo">
      <a href="/" rel="home">
        
        <img src="http://oct3pmpde.bkt.clouddn.com/timg.jpg" alt="Zcy" height="60">
        
      </a>
    </div>
    <a class="header-name" href="/">
            <span>Zcy</span>
            的小屋
        </a>
    <!-- navbar -->
    <nav class="navbar">
      <!--  nav links -->
      <div class="collapse">
        <ul class="navbar-nav">
          
          
            <li>
              <a href="/.">
                
                  <i class="fa fa-home "></i>
                
                小屋
              </a>
            </li>
          
            <li>
              <a href="/archives">
                
                  <i class="fa fa-archive "></i>
                
                点滴
              </a>
            </li>
          
            <li>
              <a href="/tags">
                
                  <i class="fa fa-archive "></i>
                
                标签
              </a>
            </li>
          
            <li>
              <a href="/project">
                
                  <i class="fa fa-folder-open "></i>
                
                项目
              </a>
            </li>
          
            <li>
              <a href="/photo">
                
                  <i class="fa fa-photo "></i>
                
                相册
              </a>
            </li>
          
            <li>
              <a href="/guestbook">
                
                  <i class="fa fa-edit "></i>
                
                留言
              </a>
            </li>
          
            <li>
              <a href="/about">
                
                  <i class="fa fa-user "></i>
                
                关于我
              </a>
            </li>
          
            <li>
              <a href="/friendly">
                
                  <i class="fa fa-bicycle "></i>
                
                友情链接
              </a>
            </li>
          
        </ul>
      </div>
      <!-- /.navbar-collapse -->
    </nav>
    <div class="button-wrap">
      <button class="menu-toggle">Primary Menu</button>
    </div>
  </div>
</header>


  <!-- Main Content -->
  <div class="content-area">
    <div class="post">
        <!-- Post Content -->
        <div class="container">
            <article>
                <!-- Title date & tags -->
                <div class="post-header">
                    <h1 class="entry-title">
                        HDU6237
                        
                    </h1>

                </div>
                <p class="a-posted-on">
                    2018-10-17
                </p>
                <!-- Post Main Content -->
                <div class="entry-content">
                    <p><img src="/2018/10/17/HDU6237/title1.jpg" alt="title1"></p>
<a id="more"></a>
<p>​    这是2017年ccpc哈尔滨站的一道数论题，很荣幸在我们学校举办，题目另辟蹊径，很好的一道素数题。</p>
<p>题意：</p>
<p>Problem Description</p>
<p>After he has learned how to play Nim game, Bob begins to try another stone game which seems much easier.</p>
<p>The game goes like this: one player starts the game with N piles of stones. There is ai stones on the ith pile. On one turn, the player can move exactly one stone from one pile to another pile. After one turn, if there exits a number x(x&gt;1) such that for each pile bi is the multiple of x where bi is the number of stone of the this pile now), the game will stop. Now you need to help Bob to calculate the minimum turns he need to stop this boring game. You can regard that 0 is the multiple of any positive number.</p>
<p>Input</p>
<p>The first line is the number of test cases. For each test case, the first line contains one positive number N(1≤N≤100000), indicating the number of piles of stones.</p>
<p>The second line contains N positive number, the ith number ai(1≤ai≤100000) indicating the number of stones of the ith pile.</p>
<p>The sum of N of all test cases is not exceed 5∗105.</p>
<p>Output</p>
<p>For each test case, output a integer donating the answer as described above. If there exist a satisfied number x initially, you just need to output 0. It’s guaranteed that there exists at least one solution. </p>
<p>Sample Input</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">2</span><br><span class="line">5</span><br><span class="line">1 2 3 4 5</span><br><span class="line">2</span><br><span class="line">5 7</span><br></pre></td></tr></table></figure>
<p>Sample Output</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">2</span><br><span class="line">1</span><br></pre></td></tr></table></figure>
<p>​    翻译成汉语，大概意思就是给你一个T代表有T组样例，然后每组样例第一行给出一个n代表有n堆石子，然后分别输入每堆石子的石子数。只能从一堆石子中取一个石子移动到另一堆，问至少移动几次能使得每一堆的石子数的公共gcd &gt; 1（若此时已经gcd&gt;1了就输出0，一堆石子允许全部移光）</p>
<p>​    </p>
<p>思路：</p>
<p>​    我们求出所有堆石子的总和sum，然后筛选出它的全部素因子。也就是说，要想让每堆石子的公共gcd大于1，至少其中一个素因子是全部石子堆的因子。因此我们需要遍历每个素因子，分别求出每堆石子数变成该素因子的倍数所需的最小步数，取个最小值就是答案</p>
<p>代码：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;inttypes.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#define d int32_t</span><br><span class="line">#define ll int64_t</span><br><span class="line">#define r return</span><br><span class="line">#define N 100000</span><br><span class="line">#define For(i, star, endd) for(d i = star; i &lt;= endd; i++)</span><br><span class="line">#define mem(a) memset(a, 0, sizeof(a))</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">d T, n;</span><br><span class="line">d a[N + 5];</span><br><span class="line">d b[N + 5];</span><br><span class="line">ll prime[105];</span><br><span class="line">bool book[N + 5];</span><br><span class="line">ll prime1[N + 5];</span><br><span class="line"></span><br><span class="line">//筛1e5以内素数</span><br><span class="line">void init() &#123;</span><br><span class="line">    mem(book);</span><br><span class="line">    prime1[0] = 0;</span><br><span class="line">    For(i, 2, N) &#123;</span><br><span class="line">        if (!book[i]) &#123;</span><br><span class="line">            prime1[++prime1[0]] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        For(j, 1, prime1[0]) &#123;</span><br><span class="line">            ll t = prime1[j] * i;</span><br><span class="line">            if (t &gt; N) break;</span><br><span class="line">            book[t] = 1;</span><br><span class="line">            if (i % prime1[j] == 0) break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    r;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//筛选出t的全部素因子</span><br><span class="line">void su(ll t) &#123;</span><br><span class="line">    prime[0] = 0;</span><br><span class="line">    for (d i = 1; i &lt;= prime1[0]; i ++) &#123;</span><br><span class="line">        if (t % prime1[i] == 0) &#123;</span><br><span class="line">            prime[++prime[0]] = prime1[i];</span><br><span class="line">            while (t % prime1[i] == 0) &#123;</span><br><span class="line">                t /= prime1[i];</span><br><span class="line">            &#125;</span><br><span class="line">            if (t == 1) break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if (t != 1) &#123;</span><br><span class="line">        prime[++prime[0]] = t;</span><br><span class="line">    &#125;</span><br><span class="line">    r;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//从大到小排列</span><br><span class="line">bool cmp (d A, d B) &#123;</span><br><span class="line">    r A &gt; B;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//求每堆素因子为t的倍数时的最小移动次数</span><br><span class="line">ll Num(ll t) &#123;</span><br><span class="line">    ll sum = 0, ans = 0;</span><br><span class="line">    For(i, 1, n) &#123;</span><br><span class="line">        b[i] = a[i] % t;</span><br><span class="line">        sum += b[i];</span><br><span class="line">    &#125;</span><br><span class="line">    sort(b + 1, b + n + 1, cmp);</span><br><span class="line">    For(i, 1, n) &#123;</span><br><span class="line">        if (b[i] == 0) break;</span><br><span class="line">        ans += t - b[i];</span><br><span class="line">        sum -= t;</span><br><span class="line">        if (sum == 0) &#123;</span><br><span class="line">            break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    r ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//遍历全部素因子，取最小次数</span><br><span class="line">ll work() &#123;</span><br><span class="line">    ll minn = 99999999999;</span><br><span class="line">    For(i, 1, prime[0]) &#123;</span><br><span class="line">        minn = min(minn, Num(prime[i]));</span><br><span class="line">    &#125;</span><br><span class="line">    r minn;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">d main() &#123;</span><br><span class="line">    init();</span><br><span class="line">    scanf(&quot;%d&quot;, &amp;T);</span><br><span class="line">    while (T--) &#123;</span><br><span class="line">        ll sum = 0;</span><br><span class="line">        scanf(&quot;%d&quot;, &amp;n);</span><br><span class="line">        For(i, 1, n) &#123;</span><br><span class="line">            scanf(&quot;%d&quot;, &amp;a[i]);</span><br><span class="line">            sum += a[i];</span><br><span class="line">        &#125;</span><br><span class="line">        su(sum);</span><br><span class="line">        ll ans = work();</span><br><span class="line">        printf(&quot;%lld\n&quot;, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    r 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="http://www.ivan-zcy.top">转载请注明出处！！！</a>  </p>
<p>如果有写的不对或者不全面的地方 可通过主页的联系方式进行指正，谢谢</p>

                </div>
            </article>
        </div>
        <!-- Pre or Next -->
        
        <div class="container" >
            <ul class="pager">
                
                <li class="previous">
                    <a href="/2018/10/17/hihoCoder-1631/" rel="prev">下一篇</a>
                </li>
                
                
                <li class="next">
                    <a href="/2018/10/16/CodeForces-1047C/" rel="prev">上一篇</a>
                </li>
                
            </ul>
        </div>
        　　　　<!-- Comments -->
        <div class="container">
            
<section id="comment">
  <!-- <h1 class="title">Comments</h1> -->

  
</section>


        </div>
        
        　　　　
    </div>
</div>


  <div id="Thplayer"></div>
  <script type="application/javascript" src="/js/thplayer.min.js"></script>
  <script>
      $("#Thplayer").thplayer({
          title: "遇见",
          author: "孙燕姿",
          cover: "/img/yj.jpg",
          music: "http://www.ytmp3.cn/down/37418.mp3"
      });
  </script>

  <!-- Footer -->
  <!-- top -->
<div id="rocket-to-top">
  <div class="level-2"></div>
  <div class="level-3"></div>
</div>
<script src="http://oct3pmpde.bkt.clouddn.com/top.js"></script>
<script type="text/javascript" src="http://oct3pmpde.bkt.clouddn.com/jquery.js"></script>

<!-- Footer -->
<footer class="site-info">
  <p>
    <span>Zcy &copy; 2018</span>
    
      <span class="split">|</span>
      <span>Zcy</span>
      <p>Hosted by <a href="https://pages.coding.me" style="font-weight: bold">Coding Pages</a></p>
    
  </p>
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  本站总访问量<span id="busuanzi_value_site_pv"></span>次
  本站访客数<span id="busuanzi_value_site_uv"></span>人次
</footer>


  <!-- After footer scripts -->
  <!-- scripts -->
<script src="/js/app.js"></script>


  <script>
      (function(){

          function _scroll(){
              var acticles = $('.article > .container');
              var height = window.innerHeight || document.body.offsetHeight;
              acticles.each(function () {
                  var top = this.getBoundingClientRect().top;
                  if(top < height+1){
                      if(!$(this).hasClass('animated')) {
                          $(this).addClass('slideInRight');
                          $(this).addClass('animated');
                      }
                  }
              })

              $(window).scroll(function () {
                  acticles.each(function () {
                      var top = this.getBoundingClientRect().top;
                      if(top < height+1){
                          if(!$(this).hasClass('animated')) {
                              $(this).addClass('slideInRight');
                              $(this).addClass('animated');
                          }
                      }
                  })
              })
          }


          var bp = document.createElement('script');
          var curProtocol = window.location.protocol.split(':')[0];
          if (curProtocol === 'https') {
              bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
          }
          else {
              bp.src = 'http://push.zhanzhang.baidu.com/push.js';
          }
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(bp, s);
          _scroll();
      })();
  </script>

<script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/haruto.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>

</html>
