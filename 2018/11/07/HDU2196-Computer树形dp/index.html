<!DOCTYPE html>
<html lang="zh-CN">

<!-- Head tag -->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <!--Description-->
  

  <!--Author-->
  

  <!--Open Graph Title-->
  
      <meta property="og:title" content="HDU2196 Computer树形dp"/>
  
  <!--Open Graph Description-->
  
  <!--Open Graph Site Name-->
  <meta property="og:site_name" content="Zcy"/>
  <!--Type page-->
  
      <meta property="og:type" content="article" />
  
  <!--Page Cover-->
  

    <meta name="baidu-site-verification" content="8vgn54BtUC" />

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <!-- 百度统计 -->
    <script>
	var _hmt = _hmt || [];
	(function() {
  	var hm = document.createElement("script");
  	hm.src = "https://hm.baidu.com/hm.js?c0451e16533956173997b85f7a8de666";
  	var s = document.getElementsByTagName("script")[0]; 
  	s.parentNode.insertBefore(hm, s);
	})();
    </script>
  <!-- Title -->
  
  <title>HDU2196 Computer树形dp - Zcy</title>


  <link rel="shortcut icon" href="/favicon.ico">
    <!--font-awesome-->
  <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css">

    <link rel="stylesheet" href="/css/animate.css">
    <link rel="stylesheet" href="/css/thplayer.css">
  <!-- Custom CSS/Sass -->
  <link rel="stylesheet" href="/css/style.css">
    <script src="http://oct3pmpde.bkt.clouddn.com/jquery.js"></script>
</head>


<body>

  <!-- Nav -->
  <header class="site-header">
  <div class="header-inside">
    
    <div class="logo">
      <a href="/" rel="home">
        
        <img src="http://oct3pmpde.bkt.clouddn.com/timg.jpg" alt="Zcy" height="60">
        
      </a>
    </div>
    <a class="header-name" href="/">
            <span>Zcy</span>
            的小屋
        </a>
    <!-- navbar -->
    <nav class="navbar">
      <!--  nav links -->
      <div class="collapse">
        <ul class="navbar-nav">
          
          
            <li>
              <a href="/.">
                
                  <i class="fa fa-home "></i>
                
                小屋
              </a>
            </li>
          
            <li>
              <a href="/archives">
                
                  <i class="fa fa-archive "></i>
                
                点滴
              </a>
            </li>
          
            <li>
              <a href="/tags">
                
                  <i class="fa fa-archive "></i>
                
                标签
              </a>
            </li>
          
            <li>
              <a href="/project">
                
                  <i class="fa fa-folder-open "></i>
                
                项目
              </a>
            </li>
          
            <li>
              <a href="/photo">
                
                  <i class="fa fa-photo "></i>
                
                相册
              </a>
            </li>
          
            <li>
              <a href="/guestbook">
                
                  <i class="fa fa-edit "></i>
                
                留言
              </a>
            </li>
          
            <li>
              <a href="/about">
                
                  <i class="fa fa-user "></i>
                
                关于我
              </a>
            </li>
          
            <li>
              <a href="/friendly">
                
                  <i class="fa fa-bicycle "></i>
                
                友情链接
              </a>
            </li>
          
        </ul>
      </div>
      <!-- /.navbar-collapse -->
    </nav>
    <div class="button-wrap">
      <button class="menu-toggle">Primary Menu</button>
    </div>
  </div>
</header>


  <!-- Main Content -->
  <div class="content-area">
    <div class="post">
        <!-- Post Content -->
        <div class="container">
            <article>
                <!-- Title date & tags -->
                <div class="post-header">
                    <h1 class="entry-title">
                        HDU2196 Computer树形dp
                        
                    </h1>

                </div>
                <p class="a-posted-on">
                    2018-11-07
                </p>
                <!-- Post Main Content -->
                <div class="entry-content">
                    <p><img src="/2018/11/07/HDU2196-Computer树形dp/title1.jpg" alt="title1"></p>
<a id="more"></a>
<p>Problem Description</p>
<p>A school bought the first computer some time ago(so this computer’s id is 1). During the recent years the school bought N-1 new computers. Each new computer was connected to one of settled earlier. Managers of school are anxious about slow functioning of the net and want to know the maximum distance Si for which i-th computer needs to send signal (i.e. length of cable to the most distant computer). You need to provide this information.<br><img src="http://acm.hdu.edu.cn/data/images/C128-1005-1.JPG" alt="img"></p>
<p>Hint: the example input is corresponding to this graph. And from the graph, you can see that the computer 4 is farthest one from 1, so S1 = 3. Computer 4 and 5 are the farthest ones from 2, so S2 = 2. Computer 5 is the farthest one from 3, so S3 = 3. we also get S4 = 4, S5 = 4.</p>
<p>Input</p>
<p>Input file contains multiple test cases.In each case there is natural number N (N&lt;=10000) in the first line, followed by (N-1) lines with descriptions of computers. i-th line contains two natural numbers - number of computer, to which i-th computer is connected and length of cable used for connection. Total length of cable does not exceed 10^9. Numbers in lines of input are separated by a space. </p>
<p>Output</p>
<p>For each case output N lines. i-th line must contain number Si for i-th computer (1&lt;=i&lt;=N). </p>
<p>Sample Input</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">5</span><br><span class="line">1 1</span><br><span class="line">2 1</span><br><span class="line">3 1</span><br><span class="line">1 1</span><br></pre></td></tr></table></figure>
<p>Sample Output</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">3</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">4</span><br></pre></td></tr></table></figure>
<p>​    翻译成汉语，就是给你n个点，再给n - 1行每行两个整数a, b，代表第i个电脑和a相连距离为b。最后输出每台电脑距离最远电脑的距离</p>
<p>思路：</p>
<p>​    这题我们可以把图转化为树，可以说是树形dp吧。我们通过第一遍dfs由叶到根递归计算每个节点作为根节点的子树中，与该节点距离最远和次远的距离与儿子节点。再通过第二遍dfs由根到叶递归计算每个节点往上走（非该子树）节点的最长距离。最后我们遍历每个节点，只需要比较该节点作为根节点的子树中的最长距离与往上走的最大值，取较大值即为答案。</p>
<p>代码：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line">#define N 10005</span><br><span class="line">#define mem(a) memset(a, 0, sizeof(a));</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">struct node &#123;</span><br><span class="line">    int son, val;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">struct gold &#123;</span><br><span class="line">    int maxx, son;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int n;</span><br><span class="line">vector&lt;node&gt;point[N];</span><br><span class="line">gold maxn[N][3];  //0最大值 1次大值 2父最大值</span><br><span class="line">int pre[N];</span><br><span class="line"></span><br><span class="line">void init() &#123;</span><br><span class="line">    int a, b;</span><br><span class="line">    node c;</span><br><span class="line">    mem(maxn);</span><br><span class="line">    for (int i = 1; i &lt;= n; i++) &#123;</span><br><span class="line">        pre[i] = i;</span><br><span class="line">        point[i].clear();</span><br><span class="line">    &#125;</span><br><span class="line">    for (int i = 2; i &lt;= n; i++) &#123;</span><br><span class="line">        scanf(&quot;%d%d&quot;, &amp;a, &amp;b);</span><br><span class="line">        pre[i] = a;</span><br><span class="line">        c.son = i;</span><br><span class="line">        c.val = b;</span><br><span class="line">        point[a].push_back(c);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void dfs(int inx) &#123;</span><br><span class="line">    for (int i = 0; i &lt; point[inx].size(); i ++) &#123;</span><br><span class="line">        node son = point[inx][i];</span><br><span class="line">        dfs(son.son);</span><br><span class="line">        if(maxn[inx][0].maxx &lt; son.val + maxn[son.son][0].maxx) &#123;</span><br><span class="line">            maxn[inx][1].maxx = maxn[inx][0].maxx;</span><br><span class="line">            maxn[inx][1].son = maxn[inx][0].son;</span><br><span class="line">            maxn[inx][0].maxx = son.val + maxn[son.son][0].maxx;</span><br><span class="line">            maxn[inx][0].son = son.son;</span><br><span class="line">        &#125; else if(maxn[inx][1].maxx &lt; son.val + maxn[son.son][0].maxx) &#123;</span><br><span class="line">            maxn[inx][1].maxx = son.val + maxn[son.son][0].maxx;</span><br><span class="line">            maxn[inx][1].son = son.son;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void dfs1(int inx) &#123;</span><br><span class="line">    int father = pre[inx];</span><br><span class="line">    if(inx != 1) &#123;</span><br><span class="line">        int t;</span><br><span class="line">        for(int i = 0; i &lt; point[father].size(); i++) &#123;</span><br><span class="line">            if(point[father][i].son == inx) &#123;</span><br><span class="line">                t = point[father][i].val;</span><br><span class="line">                break;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        if(maxn[father][0].son == inx) &#123;</span><br><span class="line">            maxn[inx][2].son = father;</span><br><span class="line">            maxn[inx][2].maxx = t + max(maxn[father][1].maxx, maxn[father][2].maxx);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            maxn[inx][2].son = father;</span><br><span class="line">            maxn[inx][2].maxx = t + max(maxn[father][0].maxx, maxn[father][2].maxx);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    for (int i = 0; i &lt; point[inx].size(); i++) &#123;</span><br><span class="line">        dfs1(point[inx][i].son);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main () &#123;</span><br><span class="line">    while (scanf(&quot;%d&quot;, &amp;n) == 1) &#123;</span><br><span class="line">        int ans;</span><br><span class="line">        init();</span><br><span class="line">        dfs(1);</span><br><span class="line">        dfs1(1);</span><br><span class="line">        for (int i = 1; i &lt;= n; i++) &#123;</span><br><span class="line">            ans = max(maxn[i][0].maxx, maxn[i][2].maxx);</span><br><span class="line">            printf(&quot;%d\n&quot;, ans);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="http://www.ivan-zcy.top">转载请注明出处！！！</a>  </p>
<p>如果有写的不对或者不全面的地方 可通过主页的联系方式进行指正，谢谢</p>

                </div>
            </article>
        </div>
        <!-- Pre or Next -->
        
        <div class="container" >
            <ul class="pager">
                
                <li class="previous">
                    <a href="/2018/11/07/CodeForces219D-树形dp/" rel="prev">下一篇</a>
                </li>
                
                
                <li class="next">
                    <a href="/2018/11/06/HDU1520Anniversary-party-树形dp/" rel="prev">上一篇</a>
                </li>
                
            </ul>
        </div>
        　　　　<!-- Comments -->
        <div class="container">
            
<section id="comment">
  <!-- <h1 class="title">Comments</h1> -->

  
</section>


        </div>
        
        　　　　
    </div>
</div>


  <div id="Thplayer"></div>
  <script type="application/javascript" src="/js/thplayer.min.js"></script>
  <script>
      $("#Thplayer").thplayer({
          title: "遇见",
          author: "孙燕姿",
          cover: "/img/yj.jpg",
          music: "http://www.ytmp3.cn/down/37418.mp3"
      });
  </script>

  <!-- Footer -->
  <!-- top -->
<div id="rocket-to-top">
  <div class="level-2"></div>
  <div class="level-3"></div>
</div>
<script src="http://oct3pmpde.bkt.clouddn.com/top.js"></script>
<script type="text/javascript" src="http://oct3pmpde.bkt.clouddn.com/jquery.js"></script>

<!-- Footer -->
<footer class="site-info">
  <p>
    <span>Zcy &copy; 2018</span>
    
      <span class="split">|</span>
      <span>Zcy</span>
      <p>Hosted by <a href="https://pages.coding.me" style="font-weight: bold">Coding Pages</a></p>
    
  </p>
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  本站总访问量<span id="busuanzi_value_site_pv"></span>次
  本站访客数<span id="busuanzi_value_site_uv"></span>人次
</footer>


  <!-- After footer scripts -->
  <!-- scripts -->
<script src="/js/app.js"></script>


  <script>
      (function(){

          function _scroll(){
              var acticles = $('.article > .container');
              var height = window.innerHeight || document.body.offsetHeight;
              acticles.each(function () {
                  var top = this.getBoundingClientRect().top;
                  if(top < height+1){
                      if(!$(this).hasClass('animated')) {
                          $(this).addClass('slideInRight');
                          $(this).addClass('animated');
                      }
                  }
              })

              $(window).scroll(function () {
                  acticles.each(function () {
                      var top = this.getBoundingClientRect().top;
                      if(top < height+1){
                          if(!$(this).hasClass('animated')) {
                              $(this).addClass('slideInRight');
                              $(this).addClass('animated');
                          }
                      }
                  })
              })
          }


          var bp = document.createElement('script');
          var curProtocol = window.location.protocol.split(':')[0];
          if (curProtocol === 'https') {
              bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
          }
          else {
              bp.src = 'http://push.zhanzhang.baidu.com/push.js';
          }
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(bp, s);
          _scroll();
      })();
  </script>
  <!-- 页面点击小红心 -->
  <script type="text/javascript" src="/js/clicklove.js"></script>

<script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/haruto.model.json"},"display":{"position":"left","width":70,"height":140},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>

</html>
