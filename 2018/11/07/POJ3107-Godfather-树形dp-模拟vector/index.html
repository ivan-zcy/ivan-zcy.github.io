<!DOCTYPE html>
<html lang="zh-CN">

<!-- Head tag -->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <!--Description-->
  

  <!--Author-->
  

  <!--Open Graph Title-->
  
      <meta property="og:title" content="POJ3107 Godfather 树形dp+模拟vector"/>
  
  <!--Open Graph Description-->
  
  <!--Open Graph Site Name-->
  <meta property="og:site_name" content="Zcy"/>
  <!--Type page-->
  
      <meta property="og:type" content="article" />
  
  <!--Page Cover-->
  

    <meta name="baidu-site-verification" content="8vgn54BtUC" />

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <!-- 百度统计 -->
    <script>
	var _hmt = _hmt || [];
	(function() {
  	var hm = document.createElement("script");
  	hm.src = "https://hm.baidu.com/hm.js?c0451e16533956173997b85f7a8de666";
  	var s = document.getElementsByTagName("script")[0]; 
  	s.parentNode.insertBefore(hm, s);
	})();
    </script>
  <!-- Title -->
  
  <title>POJ3107 Godfather 树形dp+模拟vector - Zcy</title>


  <link rel="shortcut icon" href="/favicon.ico">
    <!--font-awesome-->
  <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css">

    <link rel="stylesheet" href="/css/animate.css">
    <link rel="stylesheet" href="/css/thplayer.css">
  <!-- Custom CSS/Sass -->
  <link rel="stylesheet" href="/css/style.css">
    <script src="http://oct3pmpde.bkt.clouddn.com/jquery.js"></script>
</head>

<body>

  <!-- Nav -->
  <header class="site-header">
  <div class="header-inside">
    
    <div class="logo">
      <a href="/" rel="home">
        
        <img src="/img/timg.jpg" alt="Zcy" height="60">
        
      </a>
    </div>
    <a class="header-name" href="/">
            <span>Zcy</span>
            的小屋
        </a>
    <!-- navbar -->
    <nav class="navbar">
      <!--  nav links -->
      <div class="collapse">
        <ul class="navbar-nav">
          
          
            <li>
              <a href="/.">
                
                  <i class="fa fa-home "></i>
                
                小屋
              </a>
            </li>
          
            <li>
              <a href="/archives">
                
                  <i class="fa fa-archive "></i>
                
                点滴
              </a>
            </li>
          
            <li>
              <a href="/tags">
                
                  <i class="fa fa-archive "></i>
                
                标签
              </a>
            </li>
          
            <li>
              <a href="/project">
                
                  <i class="fa fa-folder-open "></i>
                
                项目
              </a>
            </li>
          
            <li>
              <a href="/photo">
                
                  <i class="fa fa-photo "></i>
                
                相册
              </a>
            </li>
          
            <li>
              <a href="/guestbook">
                
                  <i class="fa fa-edit "></i>
                
                留言
              </a>
            </li>
          
            <li>
              <a href="/about">
                
                  <i class="fa fa-user "></i>
                
                关于我
              </a>
            </li>
          
            <li>
              <a href="/friendly">
                
                  <i class="fa fa-bicycle "></i>
                
                友情链接
              </a>
            </li>
          
        </ul>
      </div>
      <!-- /.navbar-collapse -->
    </nav>
    <div class="button-wrap">
      <button class="menu-toggle">Primary Menu</button>
    </div>
  </div>
</header>


  <!-- Main Content -->
  <div class="content-area">
    <div class="post">
        <!-- Post Content -->
        <div class="container">
            <article>
                <!-- Title date & tags -->
                <div class="post-header">
                    <h1 class="entry-title">
                        POJ3107 Godfather 树形dp+模拟vector
                        
                    </h1>

                </div>
                <p class="a-posted-on">
                    2018-11-07
                </p>
                <!-- Post Main Content -->
                <div class="entry-content">
                    <p><img src="/2018/11/07/POJ3107-Godfather-树形dp-模拟vector/titile.jpg" alt="titile"></p>
<a id="more"></a>
<p>题意：</p>
<p>Description</p>
<p>Last years Chicago was full of gangster fights and strange murders. The chief of the police got really tired of all these crimes, and decided to arrest the mafia leaders.</p>
<p>Unfortunately, the structure of Chicago mafia is rather complicated. There are <em>n</em> persons known to be related to mafia. The police have traced their activity for some time, and know that some of them are communicating with each other. Based on the data collected, the chief of the police suggests that the mafia hierarchy can be represented as a tree. The head of the mafia, Godfather, is the root of the tree, and if some person is represented by a node in the tree, its direct subordinates are represented by the children of that node. For the purpose of conspiracy the gangsters only communicate with their direct subordinates and their direct master.</p>
<p>Unfortunately, though the police know gangsters’ communications, they do not know who is a master in any pair of communicating persons. Thus they only have an undirected tree of communications, and do not know who Godfather is.</p>
<p>Based on the idea that Godfather wants to have the most possible control over mafia, the chief of the police has made a suggestion that Godfather is such a person that after deleting it from the communications tree the size of the largest remaining connected component is as small as possible. Help the police to find all potential Godfathers and they will arrest them.</p>
<p>Input</p>
<p>The first line of the input file contains <em>n</em> — the number of persons suspected to belong to mafia (2 ≤ <em>n</em> ≤ 50 000). Let them be numbered from 1 to <em>n</em>.</p>
<p>The following <em>n</em> − 1 lines contain two integer numbers each. The pair <em>ai</em>, <em>bi</em> means that the gangster <em>ai</em> has communicated with the gangster <em>bi</em>. It is guaranteed that the gangsters’ communications form a tree.</p>
<p>Output</p>
<p>Print the numbers of all persons that are suspected to be Godfather. The numbers must be printed in the increasing order, separated by spaces.</p>
<p>Sample Input</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">6</span><br><span class="line">1 2</span><br><span class="line">2 3</span><br><span class="line">2 5</span><br><span class="line">3 4</span><br><span class="line">3 6</span><br></pre></td></tr></table></figure>
<p>Sample Output</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">2 3</span><br></pre></td></tr></table></figure>
<p>​    题目大体意思就是给出一个无向无环图，从中去掉一个结点使其分为一个或多个无向无环图，问去掉哪个结点分成的最大树的结点数最小，把所有符合条件的结点按从小到大的顺序输出出来</p>
<p>思路：</p>
<p>​    我们可以把无向无环图看作是一棵树，网上说就是求树的所有重心（也就是结点到其它结点的距离和最小）。我的思路也和网上查不多。我们可以强制以1作为根节点，然后由叶到根求每个节点作为根节点的子树的结点和。利用dp【i】存储去掉i结点分成的k颗树的最大结点数，那么dp【i】为i的全部儿子结点为根的子树的最大值与n - (i为根节点的子树结点数)，取两者的较大值即为dp【i】</p>
<p>​    因为是一遍遍历嘛～复杂度大概为O(n)，用vector存储邻接表2s竟然TLE我的天！！！换成数组模拟vector只有400多ms，再加上快速读模版只耗费了110ms，就酱紫～</p>
<p>代码：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#define N 50005</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">namespace IO &#123;</span><br><span class="line">    const int MX = 8e5;</span><br><span class="line">    char buf[MX];</span><br><span class="line">    int c, sz;</span><br><span class="line">    void begin() &#123;</span><br><span class="line">        c = 0;</span><br><span class="line">        sz = fread(buf, 1, MX, stdin);</span><br><span class="line">    &#125;</span><br><span class="line">    inline bool read(int &amp;t) &#123;</span><br><span class="line">        while (c &lt; sz &amp;&amp; (buf[c] &lt; &apos;0&apos; || buf[c] &gt; &apos;9&apos;)) &#123;</span><br><span class="line">            c++;</span><br><span class="line">        &#125;</span><br><span class="line">        if (c &gt;= sz) return false;</span><br><span class="line">        for (t = 0; c &lt; sz &amp;&amp; &apos;0&apos; &lt;= buf[c] &amp;&amp; buf[c] &lt;= &apos;9&apos;; c++) &#123;</span><br><span class="line">            t = t * 10 + buf[c] - &apos;0&apos;;</span><br><span class="line">        &#125;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int n;</span><br><span class="line">int point[2 * N];</span><br><span class="line">int last[2 * N];</span><br><span class="line">int flag[N];</span><br><span class="line">int num[N];</span><br><span class="line">int dp[N];</span><br><span class="line">int ans[N];</span><br><span class="line"></span><br><span class="line">int read() &#123;</span><br><span class="line">    char c = getchar();</span><br><span class="line">    int x = 0;</span><br><span class="line">    while (c &lt; &apos;0&apos; || c &gt; &apos;9&apos;) &#123;</span><br><span class="line">        c = getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    while (c &gt;= &apos;0&apos; &amp;&amp; c &lt;= &apos;9&apos;) &#123;</span><br><span class="line">        x = x * 10 + c - &apos;0&apos;;</span><br><span class="line">        c = getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    return x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void init() &#123;</span><br><span class="line">    int a, b, tot = 0;;</span><br><span class="line">    for (int i = 0; i &lt; n - 1; i++) &#123;</span><br><span class="line">        IO::read(a);</span><br><span class="line">        IO::read(b);</span><br><span class="line">        point[++tot] = b;</span><br><span class="line">        last[tot] = flag[a];</span><br><span class="line">        flag[a] = tot;</span><br><span class="line">        point[++tot] = a;</span><br><span class="line">        last[tot] = flag[b];</span><br><span class="line">        flag[b] = tot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void dfs(int inx, int father) &#123;</span><br><span class="line">    num[inx] = 1;</span><br><span class="line">    for (int i = flag[inx]; i != 0; i = last[i]) &#123;</span><br><span class="line">        int son = point[i];</span><br><span class="line">        if(son == father) continue;</span><br><span class="line">        dfs(son, inx);</span><br><span class="line">        num[inx] += num[son];</span><br><span class="line">        dp[inx] = max(dp[inx], num[son]);</span><br><span class="line">    &#125;</span><br><span class="line">    dp[inx] = max(dp[inx], n - num[inx]);</span><br><span class="line">    return;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    IO::begin();</span><br><span class="line">    IO::read(n);</span><br><span class="line">    init();</span><br><span class="line">    dfs(1, -1);</span><br><span class="line">    int minn = 0x3f3f3f3f;</span><br><span class="line">    int tot = 0;</span><br><span class="line">    for (int i = 1; i &lt;= n; i++) &#123;</span><br><span class="line">        if(minn &gt; dp[i]) &#123;</span><br><span class="line">            tot = 0;</span><br><span class="line">            ans[tot++] = i;</span><br><span class="line">            minn = dp[i];</span><br><span class="line">        &#125; else if(minn == dp[i]) &#123;</span><br><span class="line">            ans[tot++] = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    for (int i = 0; i &lt; tot; i++) &#123;</span><br><span class="line">        if (i == tot - 1) printf(&quot;%d\n&quot;, ans[i]);</span><br><span class="line">        else printf(&quot;%d &quot;, ans[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="http://www.ivan-zcy.top">转载请注明出处！！！</a>  </p>
<p>如果有写的不对或者不全面的地方 可通过主页的联系方式进行指正，谢谢</p>

                </div>
            </article>
        </div>
        <div>
            {% if not is_index %}
            {% include 'passage-end-tag.swig' %}
            {% endif %}
        </div>
        <!-- Pre or Next -->
        
        <div class="container" >
            <ul class="pager">
                
                <li class="previous">
                    <a href="/2018/11/08/POJ3140Contestants-Division-树形dp/" rel="prev">下一篇</a>
                </li>
                
                
                <li class="next">
                    <a href="/2018/11/07/CodeForces219D-树形dp/" rel="prev">上一篇</a>
                </li>
                
            </ul>
        </div>
        　　　　<!-- Comments -->
        <div class="container">
            
<section id="comment">
  <!-- <h1 class="title">Comments</h1> -->

  
</section>


        </div>
        
        　　　　
    </div>
</div>


  <div id="Thplayer"></div>
  <script type="application/javascript" src="/js/thplayer.min.js"></script>
  <script>
      $("#Thplayer").thplayer({
          title: "遇见",
          author: "孙燕姿",
          cover: "/img/yj.jpg",
          music: "http://www.ytmp3.cn/down/37418.mp3"
      });
  </script>

  <!-- Footer -->
  <!-- top -->
<div id="rocket-to-top">
  <div class="level-2"></div>
  <div class="level-3"></div>
</div>
<script src="http://oct3pmpde.bkt.clouddn.com/top.js"></script>
<script type="text/javascript" src="http://oct3pmpde.bkt.clouddn.com/jquery.js"></script>

<!-- Footer -->
<footer class="site-info">
  <p>
    <span>Zcy &copy; 2018</span>
    
      <span class="split">|</span>
      <span>Zcy</span>
      <p>Hosted by <a href="https://pages.coding.me" style="font-weight: bold">Coding Pages</a></p>
    
  </p>
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  本站总访问量<span id="busuanzi_value_site_pv"></span>次
  本站访客数<span id="busuanzi_value_site_uv"></span>人次
    <p>
        <span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>
    </p>
  <script>
      var now = new Date();
      function createtime() {
          var grt= new Date("09/28/2018 08:00:00");//此处修改你的建站时间或者网站上线时间
          now.setTime(now.getTime()+250);
          days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
          hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
          if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
          mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
          seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
          snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
          document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 ";
          document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒";
      }
      setInterval("createtime()",250);
  </script>
</footer>


  <!-- After footer scripts -->
  <!-- scripts -->
<script src="/js/app.js"></script>


  <script>
      (function(){

          function _scroll(){
              var acticles = $('.article > .container');
              var height = window.innerHeight || document.body.offsetHeight;
              acticles.each(function () {
                  var top = this.getBoundingClientRect().top;
                  if(top < height+1){
                      if(!$(this).hasClass('animated')) {
                          $(this).addClass('slideInRight');
                          $(this).addClass('animated');
                      }
                  }
              })

              $(window).scroll(function () {
                  acticles.each(function () {
                      var top = this.getBoundingClientRect().top;
                      if(top < height+1){
                          if(!$(this).hasClass('animated')) {
                              $(this).addClass('slideInRight');
                              $(this).addClass('animated');
                          }
                      }
                  })
              })
          }


          var bp = document.createElement('script');
          var curProtocol = window.location.protocol.split(':')[0];
          if (curProtocol === 'https') {
              bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
          }
          else {
              bp.src = 'http://push.zhanzhang.baidu.com/push.js';
          }
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(bp, s);
          _scroll();
      })();
  </script>
  <script type="text/javascript"
          color="0,0,0" opacity='0.5' zIndex="-2" count="35" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>
  <!-- 页面点击小红心 -->
  <script type="text/javascript" src="/js/clicklove.js"></script>
<script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/haruto.model.json"},"display":{"position":"left","width":70,"height":140},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>

</html>
